<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>

<body>
	<script>
		let passengers = [
			{ name: "Jane Doloop", paid: true, ticket: "coach" },
			{ name: "Dr. Evel", paid: true, ticket: "firstclass" },
			{ name: "Sue Property", paid: false, ticket: "firstclass" },
			{ name: "John Funcall", paid: true, ticket: "coach" }
		];
		function processPassangers(passengers, testFunction) {
			for (let i = 0; i < passengers.length; i++) {
				if (testFunction(passengers[i])) {
					return false
				}
			}
			return true
		};
		function checkNoFlyList(passenger) {
			return (passenger.name === "Dr. Evel")
		};
		function checkNotPaid(passenger) {
			return (!passenger.paid)
		};
		function printPassenger(passenger) {
			let message = passenger.name;
			if (passenger.paid) {
				message = message + ": Paid"
			} else {
				message = message + ": Not paid"
			};
			console.log(message);
			return false;
		};
		function createDrinkOrder(passenger) {
			let orderFunction;

			if (passenger.ticket === "firstclass") {
				orderFunction = function () {
					console.log("Would you like a cocktail or wine?")
				};
			} else {
				orderFunction = function () {
					console.log("Your choice is cola or water.")
				};
			}
			return orderFunction;
		}

		function serveCustomer(passenger) {
			let getDrinkOrderFunction = createDrinkOrder(passenger);
			getDrinkOrderFunction();
			//предложить обед
			getDrinkOrderFunction();
			getDrinkOrderFunction();
			// включить кино
			getDrinkOrderFunction();
			// забрать мусор
		};
		function servePassengers(passengers) {
			for (let i = 0; i < passengers.length; i++) {
				serveCustomer(passengers[i]);
			}
		};
		servePassengers(passengers);

		let allCanFly = processPassangers(passengers, checkNoFlyList);
		if (!allCanFly) {
			console.log("The plane can't take off: we have a passenger on tho no-fly-list.")
		}
		let allPaid = processPassangers(passengers, checkNotPaid);
		if (!allPaid) {
			console.log("The plane can't take off: not everyone has paid.")
		};
		processPassangers(passengers, printPassenger)

		/*==========Упражнение==============*/
		console.log("==========Упражнение==============")
		function fun(echo) {
			console.log(echo)
		};
		fun("Hello"); //Hello in console
		function boo(aFunction) {
			aFunction("Boo")
		};
		boo(fun); // Boo in console
		console.log(fun); //function just
		fun(boo) // function boo
		let moreFun = fun;
		moreFun("hello again"); // hello again

		function echoMaker() {
			return fun;
		}

		let bigFun = echoMaker();
		bigFun("Is there an echo?"); // Is there an echo?

		console.log("===================New============");

		function addN(n) {
			let adder = function (x) {
				return n + x
			};
			return adder;
		}
		let add2 = addN(2);
		console.log(add2(10));
		console.log(add2(100));
	</script>
</body>

</html>